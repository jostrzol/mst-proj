<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Survey analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="survey_files/libs/clipboard/clipboard.min.js"></script>
<script src="survey_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="survey_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="survey_files/libs/quarto-html/popper.min.js"></script>
<script src="survey_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="survey_files/libs/quarto-html/anchor.min.js"></script>
<link href="survey_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="survey_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="survey_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="survey_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="survey_files/libs/bootstrap/bootstrap-35a5fdd3878816e2c0e4dca037745843.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="../../survey.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Survey analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="7198d7bb" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">TIMESTAMP</th>
<th data-quarto-table-cell-role="th">S1_INDUSTRY</th>
<th data-quarto-table-cell-role="th">S1_ROLE</th>
<th data-quarto-table-cell-role="th">S2_LANGUAGES_USED</th>
<th data-quarto-table-cell-role="th">S2_C_CPP_RATIO</th>
<th data-quarto-table-cell-role="th">S3_PERFORMANCE</th>
<th data-quarto-table-cell-role="th">S3_DEBUGGING</th>
<th data-quarto-table-cell-role="th">S3_LEGACY</th>
<th data-quarto-table-cell-role="th">S3_HARDWARE</th>
<th data-quarto-table-cell-role="th">S3_MEMORY</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">S4_TRAINING</th>
<th data-quarto-table-cell-role="th">S4_TOOLING</th>
<th data-quarto-table-cell-role="th">S5_DID_USE_MODERN</th>
<th data-quarto-table-cell-role="th">S5_BARRIERS</th>
<th data-quarto-table-cell-role="th">S5_MODERN_ADOPTION</th>
<th data-quarto-table-cell-role="th">S6_BUILD_SYSTEM_SATISFACTION</th>
<th data-quarto-table-cell-role="th">S6_STATIC_ANALYSIS_RELIANCE</th>
<th data-quarto-table-cell-role="th">S6_STATIC_ANALYSIS_SATISFACTION</th>
<th data-quarto-table-cell-role="th">S7_WANTED_FEATURES</th>
<th data-quarto-table-cell-role="th">S7_COMMENTS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2025/05/14 12:21:10 am EEST</td>
<td>Industrial automation</td>
<td>Software engineer</td>
<td>C</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>2</td>
<td>...</td>
<td>4</td>
<td>4</td>
<td>No</td>
<td>Difficulty of integrating into existing codeba...</td>
<td>2</td>
<td>4</td>
<td>2</td>
<td>3.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2025/05/14 12:35:14 am EEST</td>
<td>Industrial automation</td>
<td>Hardware and Software</td>
<td>C;Python / MicroPython;Golang</td>
<td>7</td>
<td>4</td>
<td>2</td>
<td>5</td>
<td>4</td>
<td>1</td>
<td>...</td>
<td>4</td>
<td>4</td>
<td>Yes</td>
<td>Team unfamiliarity</td>
<td>4</td>
<td>2</td>
<td>2</td>
<td>2.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2025/05/14 12:41:27 am EEST</td>
<td>IoT / Edge Computing</td>
<td>Software engineer</td>
<td>C;C++</td>
<td>10</td>
<td>3</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>...</td>
<td>5</td>
<td>3</td>
<td>No</td>
<td>Lack of mature toolchain;lightness of C</td>
<td>1</td>
<td>5</td>
<td>1</td>
<td>NaN</td>
<td>esp-idf is best of the best frameworks i ever ...</td>
<td>now i just can say that C is the best lang to ...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2025/05/14 12:42:37 am EEST</td>
<td>Aerospace</td>
<td>Software engineer</td>
<td>C;Fortran</td>
<td>8</td>
<td>4</td>
<td>1</td>
<td>5</td>
<td>3</td>
<td>1</td>
<td>...</td>
<td>4</td>
<td>4</td>
<td>No</td>
<td>Team unfamiliarity</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>3.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2025/05/14 12:43:27 am EEST</td>
<td>Automotive;Consumer electronics</td>
<td>Hardware engineer</td>
<td>C</td>
<td>10</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>...</td>
<td>3</td>
<td>3</td>
<td>No</td>
<td>Insufficient libraries/driver support;Lack of ...</td>
<td>1</td>
<td>5</td>
<td>3</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 30 columns</p>
</div>
</div>
</div>
<section id="section-1-demographics-and-role" class="level2">
<h2 class="anchored" data-anchor-id="section-1-demographics-and-role">Section 1: Demographics and role</h2>
<section id="industry-segment" class="level3">
<h3 class="anchored" data-anchor-id="industry-segment">Industry segment</h3>
</section>
<section id="primary-role" class="level3">
<h3 class="anchored" data-anchor-id="primary-role">Primary role</h3>
</section>
</section>
<section id="section-2-current-language-use" class="level2">
<h2 class="anchored" data-anchor-id="section-2-current-language-use">Section 2: Current language use</h2>
<section id="language-use" class="level3">
<h3 class="anchored" data-anchor-id="language-use">Language use</h3>
<p><em>Which programming languages do you currently use or have used in the past for microcontroller projects?</em></p>
</section>
<section id="codebase" class="level3">
<h3 class="anchored" data-anchor-id="codebase">Codebase</h3>
<p><em>What ratio of your embedded codebase is in C/C++?</em></p>
</section>
</section>
<section id="section-3-pain-points-and-challenges" class="level2">
<h2 class="anchored" data-anchor-id="section-3-pain-points-and-challenges">Section 3: Pain points and challenges</h2>
</section>
<section id="section-4-language-selection-criteria" class="level2">
<h2 class="anchored" data-anchor-id="section-4-language-selection-criteria">Section 4: Language selection criteria</h2>
</section>
<section id="section-5-modern-language-adoption" class="level2">
<h2 class="anchored" data-anchor-id="section-5-modern-language-adoption">Section 5: Modern language adoption</h2>
<section id="modern-language-use" class="level3">
<h3 class="anchored" data-anchor-id="modern-language-use">Modern language use</h3>
<p><em>Have you ever used any “modern” language (e.g.&nbsp;Rust, Zig) for embedded development?</em></p>
<div id="cf68d472" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="survey_files/figure-html/cell-14-output-1.png" width="472" height="472" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="barriers" class="level3">
<h3 class="anchored" data-anchor-id="barriers">Barriers</h3>
<p><em>If not, what barriers prevent you?</em></p>
</section>
<section id="how-likely-to-adopt" class="level3">
<h3 class="anchored" data-anchor-id="how-likely-to-adopt">How likely to adopt</h3>
<p><em>How likely are you to adopt any “modern” language in the next 12 months?</em></p>
</section>
</section>
<section id="section-6-tooling-and-ecosystem" class="level2">
<h2 class="anchored" data-anchor-id="section-6-tooling-and-ecosystem">Section 6: Tooling and ecosystem</h2>
<section id="cc-build-system-satisfaction" class="level3">
<h3 class="anchored" data-anchor-id="cc-build-system-satisfaction">C/C++ build system satisfaction</h3>
<p><em>Rate your satisfaction with the build system for C/C++ that you use for embedded projects.</em></p>
</section>
<section id="cc-static-analysis-reliance" class="level3">
<h3 class="anchored" data-anchor-id="cc-static-analysis-reliance">C/C++ static analysis reliance</h3>
<p><em>How much do you rely on C/C++ static analysis tools for microcontroller code? (e.g.&nbsp;clang-tidy, MISRA checkers)</em></p>
</section>
<section id="cc-static-analysis-satisfaction" class="level3">
<h3 class="anchored" data-anchor-id="cc-static-analysis-satisfaction">C/C++ static analysis satisfaction</h3>
<p><em>Rate your satisfaction with C/C++ static analysis tools for microcontroller code.</em></p>
</section>
</section>
<section id="section-7-open-section" class="level2">
<h2 class="anchored" data-anchor-id="section-7-open-section">Section 7: Open section</h2>
<section id="wanted-features" class="level3">
<h3 class="anchored" data-anchor-id="wanted-features">Wanted features</h3>
<p><em>Can you think of any language or tooling features would most help your embedded development?</em></p>
<blockquote class="blockquote">
<p>esp-idf is best of the best frameworks i ever use. easiest to read and understand this documentation</p>
</blockquote>
<p><em>tags: documentation</em></p>
<blockquote class="blockquote">
<p>PlatformIO</p>
</blockquote>
<blockquote class="blockquote">
<p>Built in unit test, and integration tests</p>
</blockquote>
<p><em>tags: better testing environment</em></p>
<blockquote class="blockquote">
<p>Good stack frame introspection, integrated memory guards</p>
</blockquote>
<p><em>tags: debugging,memory safety</em></p>
<blockquote class="blockquote">
<p>robust build system that is integrated with the language, smarter static analysis, compile-time execution</p>
</blockquote>
<p><em>tags: better build system,static analysis,compile time</em></p>
<blockquote class="blockquote">
<p>My embedded development ranges across things with 128 bytes of RAM, 2k (very common), a few hundred KB (where I find C+Boehm GC is an excellent safe solution, but still easily able to avoid allocation/collection in time-critical parts), and on up to embedded Linux. Maybe the biggest thing a tool could do that I don’t have now would be automatic extraction of common code sequences, not necessarily into ABI-compliant functions but just raw JAL/RET snippets – especially using x5 on RISC-V (or equivalent) or Zcmt (not yet in shipping chips). On some machines a seamless ability to compile critical code to native code but most to a more compact bytecode/token form would be very useful – I’ve never seen one that beats Thumb2 or RISC-V (especially with the Zb<em>/Zc</em> extensions implemented in Hazard3) but 8 bit ISAs are generally easily beaten (especially for code handling larger data items), as are arm64 and i386/x86_64. Small size of the interpreter is also critical, as is easy switching to/from native. A modern take on SWEET16 might be interesting, or a cross between that and the integer part of Transputer. Or a recoding of a simple 2-address 16 bit opcode RISC(ish) similar to PDP11, MSP430, or SH for easier software decoding might be best e.g.&nbsp;src and dst register fields in the same place in the hi and lo bytes of the instruction and offset by log2(wordSz/8) bits so a simple masking leaves them ready to index into a “register” array. Sorry, rambling. Obviously a compiler back end would be needed.</p>
</blockquote>
<blockquote class="blockquote">
<p>I wish Vivado worked faster.</p>
</blockquote>
<blockquote class="blockquote">
<p>You didn’t ask about portability to other hardware. This was very important to us, with our system running on a bunch of different CPUs, as time went on, and sometimes multiple to “many” CPUs in one system. Being able to stick with basically the same language and tools was critical, even though the vast majority of tools were maintained internally.</p>
<p>Support for “data endian-ness” turned out to be useful, especially in network-related code.</p>
<p>There were some experiments with microkernels and vendor-provided RTOS-like things. In general, I don’t think they went very well :-(</p>
<p>Version control, bug tracking, source code management, and “release management” turned out to be important, even when … hated.</p>
<p>“Open Source software” turned out to be quite a can of worms, eventually requiring a legal team to approve (or license) any usage of OSSW code from outside the company. Licensing of commercial/proprietary software probably could have used better management as well. (I don’t know how many “copies” of V.42bis licenses we ended up with. A lot, I think.)</p>
</blockquote>
<p><em>tags: portability,debugging,certification</em></p>
<blockquote class="blockquote">
<p>Cycle accurate simulation.</p>
</blockquote>
<p><em>tags: simulation</em></p>
<blockquote class="blockquote">
<p>A better IDE, multiplatform, good debugging tool, support many programmer out of the box.</p>
</blockquote>
<p><em>tags: portability,debugging</em></p>
<blockquote class="blockquote">
<p>power usage diagnostics, stats for light/deep sleep of e.g.&nbsp;esp32</p>
</blockquote>
<p><em>tags: microcontroller diagnostics</em></p>
<blockquote class="blockquote">
<p>memory leak checker</p>
</blockquote>
<p><em>tags: debugging</em></p>
<blockquote class="blockquote">
<p>Well integrated documentation for tools (compiler, IDE) and supported hardware. No limited term license or cloud services.</p>
</blockquote>
<p><em>tags: documentation</em></p>
<blockquote class="blockquote">
<p>Better simulators to develop natively on desktops.</p>
</blockquote>
<p><em>tags: simulation</em></p>
<blockquote class="blockquote">
<p>Improved debugging support for c++</p>
</blockquote>
<p><em>tags: debugging</em></p>
<blockquote class="blockquote">
<p>KISS principle, self-made tooling for the actual requirements of the project.</p>
</blockquote>
<p><em>tags: self-made tooling</em></p>
<blockquote class="blockquote">
<p>Debugging without affecting realtime performance</p>
</blockquote>
<p><em>tags: debugging</em></p>
<blockquote class="blockquote">
<p>Proper preprocessor. The biggest pain in C in embedded is #if def and hardware variants.</p>
</blockquote>
<p><em>tags: compile time</em></p>
<blockquote class="blockquote">
<p>Long term stability</p>
</blockquote>
<p><em>tags: stability</em></p>
<blockquote class="blockquote">
<p>More significant evolution of C language features and standard library.</p>
</blockquote>
<blockquote class="blockquote">
<p>documentation</p>
</blockquote>
<p><em>tags: documentation</em></p>
<blockquote class="blockquote">
<p>a more reliable volatile checking functionality, so that I don’t pull my hair out next time I forget to add one keyword to one single variable and turn my code into an undebuggable mess :)</p>
</blockquote>
<p><em>tags: debugging</em></p>
<blockquote class="blockquote">
<p>C/asm</p>
</blockquote>
<blockquote class="blockquote">
<p>new build system / tools. Make and CMake are super hard to understand and learn - for me</p>
</blockquote>
<p><em>tags: better build system</em></p>
<blockquote class="blockquote">
<p>Porting software on different variant microcontroller and compiling issue same code with differet PC but same development tools</p>
</blockquote>
<p><em>tags: portability</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Tag</th>
<th>Mentions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>debugging</td>
<td>7</td>
</tr>
<tr class="even">
<td>documentation</td>
<td>3</td>
</tr>
<tr class="odd">
<td>portability</td>
<td>3</td>
</tr>
<tr class="even">
<td>compile time</td>
<td>2</td>
</tr>
<tr class="odd">
<td>better build system</td>
<td>2</td>
</tr>
<tr class="even">
<td>simulation</td>
<td>2</td>
</tr>
<tr class="odd">
<td>better testing environment</td>
<td>1</td>
</tr>
<tr class="even">
<td>memory safety</td>
<td>1</td>
</tr>
<tr class="odd">
<td>static analysis</td>
<td>1</td>
</tr>
<tr class="even">
<td>certification</td>
<td>1</td>
</tr>
<tr class="odd">
<td>microcontroller diagnostics</td>
<td>1</td>
</tr>
<tr class="even">
<td>self-made tooling</td>
<td>1</td>
</tr>
<tr class="odd">
<td>stability</td>
<td>1</td>
</tr>
</tbody>
</table>
</section>
<section id="comments" class="level3">
<h3 class="anchored" data-anchor-id="comments">Comments</h3>
<p><em>Any additional comments?</em></p>
<blockquote class="blockquote">
<p>now i just can say that C is the best lang to use in embedded world</p>
</blockquote>
<p><em>tags: praise C</em></p>
<blockquote class="blockquote">
<p>I use “Modern Languages” for home projects, not at work</p>
</blockquote>
<blockquote class="blockquote">
<p>As a hobbyist things can be kept simple, but for professionals certification might be an issue. As someone who is now retired but started in the embedded world for musical instrument related equipment, real time behavior was important and assembly was the best way to get it done. Now with way faster hardware C is sufficient. Worked in different fields after that, but more application software related. Totally different world. Now back in embedded as a hobbyist.</p>
</blockquote>
<blockquote class="blockquote">
<p>There were questions about how much we worried about “real time performance”, and my answers were uniformly “not too much.” That’s because we were running a bare metal homebrew OS, and making it perform was part of OUR task, not something that would fail because of the development environment (C.) When things needed more speed, we get a faster CPU. (most answers based on “large” embedded systems with MPU (680xx, MIPS, PPC, i86, ARM) with significant external RAM/etc.)</p>
</blockquote>
<blockquote class="blockquote">
<p>Most products I work on are on low end, low power microcontrollers</p>
</blockquote>
<blockquote class="blockquote">
<p>My devices sells on thousands. Setting up production costs thousands. IC performance and hardware redesign equals money. Any GC or script language is out of question. Any feature that executes outside of mcu is very welcome, like preprocessor, static analysis, unit testing, debugging, hot reload etc. But the release build must go BRRRR</p>
</blockquote>
<p><em>tags: static analysis</em></p>
<blockquote class="blockquote">
<p>Software development is an engineering discipline and should be treated like that - not like the current bohemian random art and witchcraft. Universities have to step up the systemic education of an actually capable developers, not just teach the basics of computer science.</p>
</blockquote>
<blockquote class="blockquote">
<p>KI will significantly speed up MCU software development.</p>
</blockquote>
<blockquote class="blockquote">
<p>let’s go C99, it’s like ipv4. We know it’s not perfect, but we know all drawbacks of it and how to prevent them from occuring</p>
</blockquote>
<p><em>tags: praise C</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Tag</th>
<th>Mentions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>praise C</td>
<td>2</td>
</tr>
<tr class="even">
<td>static analysis</td>
<td>1</td>
</tr>
</tbody>
</table>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>