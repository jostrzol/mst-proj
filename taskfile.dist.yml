version: '3'
dotenv: [.default.env, .env]
vars:
  LANGS: [c, rust, zig]
  PROJECTS: [1-blinky, 1-blinky-bm, 2-motor, 2-motor-bm, 3-pid, 3-pid-bm]
  LANG_EXT: {map: {c: c, rust: rs, zig: zig}}
  ARTIFACTS_DIR: "./artifacts"
  ANALYZE_OUT_DIR: ./analyze/out
includes:
  c:
    taskfile: ./c/taskfile.c.yml
    dir: ./c
    optional: true
  rust:
    taskfile: ./rust/taskfile.rust.yml
    dir: ./rust
    optional: true
  zig:
    taskfile: ./zig/taskfile.zig.yml
    dir: ./zig
    optional: true
  idf:
    taskfile: ./taskfile.idf.yml
    optional: true
  lizard:
    taskfile: ./analyze/taskfile.lizard.yml
    optional: true
  plot:
    taskfile: ./analyze/taskfile.plot.yml
    optional: true
  bench:
    taskfile: ./analyze/taskfile.benchmark.yml
    optional: true
tasks:
  build:
    deps:
      - c:build-every-profile
      - rust:build-every-profile
      - zig:build-every-profile
  plot:
    deps: ['plot:all']
